{% extends 'master.html' %}
{% block content %}

<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/css/select2.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/js/select2.min.js"></script>

<section>
  <div class="card" id="exampleModal2">
    <div class="card-header">


      <div class="row">
        <div class="col-md-4">
          <h4>Edit CRM Details ({{ data.crm_name }})</h4>
        </div>
        <div class="col-md-4"></div>

      </div>
      <div class="card-body">
        <form method="POST" action="/crm_edit/{{ data.id }}">
          {% csrf_token %}
          <div class="row">

            <div class="col-md-6">
              <div class="card-body">
                <div class="form-group">
                    <span class="floating-label">CRM Name<span style="color:red">*</span></span><br>
                    <input type="text" class="form-control inputText" name="crm_name" value="{{ data.crm_name }}" />
                  </div>



                  <div class="form-group">
                    <label>Country</label>
                    <select name="country" style="width: 100%;" required>
                      <option value="{{ data.country_id }}">{{ country }}</option>
                      {% for dt5 in country1 %}
                      <option value="{{dt5.id}}">{{dt5.country_name}}</option>
                      {% endfor %}
                      </select>
                  </div>

                  <div class="form-group"> 
                    <label>Payment Type <span style="color:red">*</span> </label>
                    <select style="width: 100%;" name="payment_type" required>
                    <option value="{{ data.payment_type_id }}">{{ payment_type }}</option>
                    {% for dt1 in payment_type1 %}
                    <option value="{{dt1.id}}">{{dt1.payment_type}}</option>
                    {% endfor %}
                    </select>
                </div>

                <div class="form-group"> 
                    <label>Company: <span style="color:red">*</span> </label>
                    <select style="width: 100%;" name="company" required>
                    <option value="{{ data.company_id }}">{{ company }}</option>
                    {% for dt3 in company1 %}
                    <option value="{{dt3.id}}">{{dt3.payroll}}</option>
                    {% endfor %}
                    </select>
                </div>

                <div class="form-group"> 
                    <span class="floating-label">Mobile Number: <span style="color:red">*</span> </span>
                    <input type="number" class="form-control inputText" name="mobile" value="{{ data.mobile }}">
                </div>

                <div class="form-group"> 
                    <span class="floating-label">Invoice Email: <span style="color:red">*</span> </span>
                    <input type="email" class="form-control inputText" name="inv_email" value="{{ data.inv_email }}">
                </div>
                <div class="form-group"> 
                    <span class="floating-label">Per Word Rate (INR): <span style="color:red">*</span> </span>
                    <input type="number" step="any" class="form-control inputText" name="per_word_rate_inr" value="{{ data.per_word_rate_inr }}" required>
                </div>
                <div class="form-group"> 
                    <span class="floating-label">GST: <span style="color:red">*</span> </span>
                    <input type="number" step="any" class="form-control inputText" name="gst" value="{{ data.gst }}" required>
                </div>


              </div>


            </div>

            <div class="col-md-6">
                <div class="card-body">
                <div class="form-group">
                    <span class="floating-label">CRM Number</span><br>
                    <input type="text" class="form-control inputText" name="crm_number" value="{{ data.crm_number }}" required />
                  </div>

                  <div class="form-group"> 
                    <label>Payment Mode<span style="color:red">*</span> </label>
                    <select name="payment_mode" style="width: 100%;" required>
                    <option value="{{ data.payment_mode_id }}">{{ payment_mode }}</option>
                    {% for dt in payment_mode1 %}
                    <option value="{{dt.id}}">{{dt.payment_mode}}</option>
                    {% endfor %}
                    </select>
                </div>
                <div class="form-group"> 
                    <label>Currency: <span style="color:red">*</span> </label>
                    <select style="width: 100%;" name="currency" required>
                    <option value="{{ data.currency_id }}">{{ currency }}</option>
                    {% for dt2 in currency1 %}
                    <option value="{{dt2.id}}">{{dt2.currency}}</option>
                    {% endfor %}
                    </select>
                </div>
                <div class="form-group"> 
                    <label>Payment To Bank: <span style="color:red">*</span> </label>
                    <select style="width: 100%;" name="bank" required>
                    <option value="{{ data.bank_id }}">{{ bank }}</option>
                    {% for dt4 in bank1 %}
                    <option value="{{dt4.id}}">{{dt4.payment_to_bank}}</option>
                    {% endfor %}
                    </select>
                </div>
                <div class="form-group"> 
                    <span class="floating-label">Contact Email: <span style="color:red">*</span> </span>
                    <input type="email" class="form-control inputText" name="contact_email" value="{{ data.contact_email }}">
                </div>
               <div class="form-group"> 
                    <span class="floating-label">Per Word Rate (Mother): <span style="color:red">*</span> </span>
                    <input type="number" step="any" class="form-control inputText" name="per_word_rate_mother" value="{{ data.per_word_rate_mother }}" required>
                </div>
                <div class="form-group"> 
                    <span class="floating-label">Credit Limit: <span style="color:red">*</span> </span>
                    <input type="number" step="any" class="form-control inputText" name="credit_limit" value="{{ data.credit_limit }}">
                </div>
                <div class="form-group"> 
                    <span class="floating-label">TDS: <span style="color:red">*</span> </span>
                    <input type="number" step="any" class="form-control inputText" name="tds" value="{{ data.tds }}">
                </div>
            </div>
            </div>
          </div>

          <div class="form-group text-center">
            <button type="submit" class="btn btn-primary btn-sm">Submit</button>
          </div>
        </form>




      </div>
    </div>
   
    {% for message in messages %}

{% if 'success' == message.tags %}
        <script type="text/javascript">
          // Default Configuration
              $(document).ready(function() {
                  toastr.options = {
                      'closeButton': true,
                      'debug': false,
                      'newestOnTop': false,
                      'progressBar': true,
                      'positionClass': 'toast-top-right',
                      'preventDuplicates': false,
                      'showDuration': '1000',
                      'hideDuration': '1000',
                      'timeOut': '3000',
                      'extendedTimeOut': '1000',
                      'showEasing': 'swing',
                      'hideEasing': 'linear',
                      'showMethod': 'fadeIn',
                      'hideMethod': 'fadeOut',
                  }
              });
      
          // Toast Type
           
                  toastr.success('Data Submitted Successfully');
             
          // Toast Image and Progress Bar
              $('#image').click(function(event) {
                  toastr.options.progressBar = true,
                  toastr.info('<img src="https://image.flaticon.com/icons/svg/34/34579.svg" style="width:150px;">', 'Toast Image')
              });
      
      
          // Toast Position
              $('#position').click(function(event) {
                  var pos = $('input[name=position]:checked', '#positionForm').val();
                  toastr.options.positionClass = "toast-" + pos;
                  toastr.options.preventDuplicates = false;
                  toastr.info('This sample position', 'Toast Position')
              });
          </script>

        {% elif 'error' == message.tags %}
        <script type="text/javascript">
          // Default Configuration
              $(document).ready(function() {
                  toastr.options = {
                      'closeButton': true,
                      'debug': false,
                      'newestOnTop': false,
                      'progressBar': false,
                      'positionClass': 'toast-top-right',
                      'preventDuplicates': false,
                      'showDuration': '1000',
                      'hideDuration': '1000',
                      'timeOut': '5000',
                      'extendedTimeOut': '1000',
                      'showEasing': 'swing',
                      'hideEasing': 'linear',
                      'showMethod': 'fadeIn',
                      'hideMethod': 'fadeOut',
                  }
              });
      
          // Toast Type
           
                  toastr.error('Data Deleted Successfully');
             
          // Toast Image and Progress Bar
              $('#image').click(function(event) {
                  toastr.options.progressBar = true,
                  toastr.info('<img src="https://image.flaticon.com/icons/svg/34/34579.svg" style="width:150px;">', 'Toast Image')
              });
      
      
          // Toast Position
              $('#position').click(function(event) {
                  var pos = $('input[name=position]:checked', '#positionForm').val();
                  toastr.options.positionClass = "toast-" + pos;
                  toastr.options.preventDuplicates = false;
                  toastr.info('This sample position', 'Toast Position')
              });
          </script>
          
         {% elif 'info' == message.tags %}

        <script type="text/javascript">
          // Default Configuration
              $(document).ready(function() {
                  toastr.options = {
                      'closeButton': true,
                      'debug': false,
                      'newestOnTop': false,
                      'progressBar': false,
                      'positionClass': 'toast-top-right',
                      'preventDuplicates': false,
                      'showDuration': '1000',
                      'hideDuration': '1000',
                      'timeOut': '5000',
                      'extendedTimeOut': '1000',
                      'showEasing': 'swing',
                      'hideEasing': 'linear',
                      'showMethod': 'fadeIn',
                      'hideMethod': 'fadeOut',
                  }
              });
      
          // Toast Type
           
                  toastr.info('Data Updated Successfully');
             
          // Toast Image and Progress Bar
              $('#image').click(function(event) {
                  toastr.options.progressBar = true,
                  toastr.info('<img src="https://image.flaticon.com/icons/svg/34/34579.svg" style="width:150px;">', 'Toast Image')
              });
      
      
          // Toast Position
              $('#position').click(function(event) {
                  var pos = $('input[name=position]:checked', '#positionForm').val();
                  toastr.options.positionClass = "toast-" + pos;
                  toastr.options.preventDuplicates = false;
                  toastr.info('This sample position', 'Toast Position')
              });
          </script>
        {% endif %}
  
        {% endfor %}
        
        <script>
            $("select").select2({
              tags: "true",
              // allowClear: true
              dropdownParent:$('#exampleModal2'),
            });
            </script>

</section>
{% endblock %}