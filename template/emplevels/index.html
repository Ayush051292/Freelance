{% extends 'master.html' %}
{% block content %}
{% load mathfilters %}
{% comment %} {% load mathfilters %} {% endcomment %}
{% comment %} Sweet Alert {% endcomment %}
<script src="sweetalert.min.js"></script>
{% comment %} Sweet Alert {% endcomment %}
<style>
  .ui-datepicker-calendar {
    display: none;
 }
</style>
<script src="https://cdn.datatables.net/fixedcolumns/4.1.0/js/dataTables.fixedColumns.min.js"></script>
<style>

table.dataTable thead tr>.dtfc-fixed-left,table.dataTable thead tr>.dtfc-fixed-right{z-index:1;background-color:#343a40;}table.dataTable tbody tr>.dtfc-fixed-left,table.dataTable tbody tr>.dtfc-fixed-right{z-index:1;background-color:#343a40;}div.dtfc-left-top-blocker,div.dtfc-right-top-blocker{background-color:#343a40;;}

  </style>
<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/css/select2.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/js/select2.min.js"></script>

<section>
  <div class="card">
    <div class="card-header">
                       
          
          <div class="row">
        <div class="col-md-4"> <h4>Employee Level</h4></div>
              <div class="col-md-4"></div>
              <div class="col-md-4 text-right">
                  <a class="btn btn-primary btn-sm"  role="button" data-toggle="modal" data-target="#exampleModal3" style="color:white">+ Add New</a>

              </div>

          </div>
    <div class="card-body">

        {% for message in messages %}

        {% if 'success' == message.tags %}
        <script type="text/javascript">
          // Default Configuration
              $(document).ready(function() {
                  toastr.options = {
                      'closeButton': true,
                      'debug': false,
                      'newestOnTop': false,
                      'progressBar': true,
                      'positionClass': 'toast-top-right',
                      'preventDuplicates': false,
                      'showDuration': '1000',
                      'hideDuration': '1000',
                      'timeOut': '5000',
                      'extendedTimeOut': '1000',
                      'showEasing': 'swing',
                      'hideEasing': 'linear',
                      'showMethod': 'fadeIn',
                      'hideMethod': 'fadeOut',
                  }
              });
      
          // Toast Type
           
                  toastr.success('Data Submitted Successfully');
             
          // Toast Image and Progress Bar
              $('#image').click(function(event) {
                  toastr.options.progressBar = true,
                  toastr.info('<img src="https://image.flaticon.com/icons/svg/34/34579.svg" style="width:150px;">', 'Toast Image')
              });
      
      
          // Toast Position
              $('#position').click(function(event) {
                  var pos = $('input[name=position]:checked', '#positionForm').val();
                  toastr.options.positionClass = "toast-" + pos;
                  toastr.options.preventDuplicates = false;
                  toastr.info('This sample position', 'Toast Position')
              });
          </script>

        {% elif 'error' == message.tags %}
        <script type="text/javascript">
          // Default Configuration
              $(document).ready(function() {
                  toastr.options = {
                      'closeButton': true,
                      'debug': false,
                      'newestOnTop': false,
                      'progressBar': false,
                      'positionClass': 'toast-top-right',
                      'preventDuplicates': false,
                      'showDuration': '1000',
                      'hideDuration': '1000',
                      'timeOut': '5000',
                      'extendedTimeOut': '1000',
                      'showEasing': 'swing',
                      'hideEasing': 'linear',
                      'showMethod': 'fadeIn',
                      'hideMethod': 'fadeOut',
                  }
              });
      
          // Toast Type
           
                  toastr.error('Data Deleted Successfully');
             
          // Toast Image and Progress Bar
              $('#image').click(function(event) {
                  toastr.options.progressBar = true,
                  toastr.info('<img src="https://image.flaticon.com/icons/svg/34/34579.svg" style="width:150px;">', 'Toast Image')
              });
      
      
          // Toast Position
              $('#position').click(function(event) {
                  var pos = $('input[name=position]:checked', '#positionForm').val();
                  toastr.options.positionClass = "toast-" + pos;
                  toastr.options.preventDuplicates = false;
                  toastr.info('This sample position', 'Toast Position')
              });
          </script>

         {% elif 'info' == message.tags %}

        <script type="text/javascript">
          // Default Configuration
              $(document).ready(function() {
                  toastr.options = {
                      'closeButton': true,
                      'debug': false,
                      'newestOnTop': false,
                      'progressBar': false,
                      'positionClass': 'toast-top-right',
                      'preventDuplicates': false,
                      'showDuration': '1000',
                      'hideDuration': '1000',
                      'timeOut': '5000',
                      'extendedTimeOut': '1000',
                      'showEasing': 'swing',
                      'hideEasing': 'linear',
                      'showMethod': 'fadeIn',
                      'hideMethod': 'fadeOut',
                  }
              });
      
          // Toast Type
           
                  toastr.info('Data Updated Successfully');
             
          // Toast Image and Progress Bar
              $('#image').click(function(event) {
                  toastr.options.progressBar = true,
                  toastr.info('<img src="https://image.flaticon.com/icons/svg/34/34579.svg" style="width:150px;">', 'Toast Image')
              });
      
      
          // Toast Position
              $('#position').click(function(event) {
                  var pos = $('input[name=position]:checked', '#positionForm').val();
                  toastr.options.positionClass = "toast-" + pos;
                  toastr.options.preventDuplicates = false;
                  toastr.info('This sample position', 'Toast Position')
              });
          </script>
        {% endif %}
  
        {% endfor %}

      <div class="table-responsive">

      <table id="example" class="display" style="width:100%">
                                
        <thead>
          <tr>
            {% comment %} <th style="text-align:center">SL No.</th> {% endcomment %}
            <th style="text-align:center">Level</th>
            <th style="text-align:center">Type</th>
            <th style="text-align:center">Weekly Min. Words</th>
            <th style="text-align:center">Weekly Max. Words</th>
            <th style="text-align:center">Weekly Min. Income</th>
            <th style="text-align:center">Weekly Max. Income</th>

            <th style="text-align:center">Monthly Min. Words</th>
            <th style="text-align:center">Monthly Max. Words</th>
            <th style="text-align:center">Monthly Min. Income</th>
            <th style="text-align:center">Monthly Max. Income</th>
            <th style="text-align:center">PPW</th>

            <th style="text-align:center">Year</th>
            <th style="text-align:center">Month</th>
            <th style="text-align:center">Day</th>


            <th style="text-align:center">Action</th>

    
        
          </tr>
        </thead>
        <tbody style="text-align: center;">
          {% for jobdet in jobdetails %}
          <tr>
            {% comment %} <td style="text-align:center">{{ forloop.counter }}</td> {% endcomment %}
            <td style="text-align:center">{{ jobdet.level }}</td>
            <td style="text-align:center">{{ jobdet.type }}</td>
            <td style="text-align:center">{{ jobdet.min_word }}</td>
            <td style="text-align:center">{{ jobdet.max_word }}</td>
            <td style="text-align:center">
              {% comment %} {% widthratio jobdet.min_word 1 jobdet.ppw %} {% endcomment %}

              {{ jobdet.min_word|mul:jobdet.ppw }} 
            </td>
            <td style="text-align:center">
              {{ jobdet.max_word|mul:jobdet.ppw }}
              {% comment %} {% widthratio jobdet.max_word 1 jobdet.ppw %} {% endcomment %}
            </td>
            <td style="text-align:center">{{ jobdet.monthly_min_word }}</td>
            <td style="text-align:center">{{ jobdet.monthly_max_word }}</td>
            <td style="text-align:center">
              {% comment %} {% widthratio jobdet.monthly_min_word 1 jobdet.ppw %} {% endcomment %}
              {{ jobdet.monthly_min_word|mul:jobdet.ppw }}
            </td>
            <td style="text-align:center">
              {% comment %} {% widthratio jobdet.monthly_max_word 1 jobdet.ppw %} {% endcomment %}
              {{ jobdet.monthly_max_word|mul:jobdet.ppw }}
              
            </td>
            <td style="text-align:center">{{ jobdet.ppw }}</td>

            <td style="text-align:center">{{ jobdet.year }}</td>
            <td style="text-align:center">{{ jobdet.month }}</td>
            <td style="text-align:center">{{ jobdet.date }}</td>

            <td style="text-align:center">
              
              <form action="/level_delete/{{ jobdet.id }}" method="POST">
                {% csrf_token %}
                <a href="/level_update/{{ jobdet.id }}" class="btn btn-primary btn-sm"  role="button" data-toggle="modal" data-target="#editmodal{{ jobdet.id }}"  style="color:white" onclick="dataval({{ jobdet.id }})"> <i class="fa fa-edit" style="color:white;"></i></a> 

                <button type="submit" class="btn btn-danger  btn-sm show_confirm" data-toggle="tooltip" title='Delete'> <i class="fa fa-trash" style="color:white;"></i></button>
            </form>

            </td>

    
          </tr>

          <div class="modal fade" id="editmodal{{ jobdet.id }}" tabindex="-1" role="dialog" aria-labelledby="editmodalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-slideout modal-md" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="editmodalLabel">Edit Job Details</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                  </button>
                </div>
                <div class="modal-body">
        
                    <div class="card-body">
                      <form method = "POST" action="/level_update/{{ jobdet.id }}" onsubmit="return submitForm1(this);">
                        {% csrf_token %}
                        <div class="card-body">
                            <div class="row">
                            <div class="col-md-6">

                              <div  class='form-group'>
                                <label>Level:</label>
                                <input type="text" name="level" class="form-control" value="{{ jobdet.level }}" placeholder="Enter Level" required>
                               </div>
                          
            
                               <div class='form-group'>
                                <label>type:</label>
                                <input type="text" name="type" class="form-control" value="{{ jobdet.type }}" placeholder="Enter Type">
                               </div>
            
            
                               <div class='form-group'>
                                <label>Weekly Min Word:</label>
                                <input type="number" name="min_word" value="{{ jobdet.min_word }}" class="form-control" placeholder="Enter Words" id="week_min_words">
                               </div>
            
                               <div class='form-group'>
                                <label>Year</label><br>
                                <input type="number" class="form-control" placeholder="Enter Year" value="{{ jobdet.year }}" name="year" >
            
            
                               </div>
                             
            
                            </div>
                            
                            <div class="col-md-6">
                              <div  class='form-group'>
                                <label> PPW:</label>
                                <input type="text" name="ppw" class="form-control" placeholder="Enter PPW" step="any" value="{{ jobdet.ppw }}"  id="pp_edit">
                              
            
                              </div> 
                              <div class='form-group'>
                                <label>Weekly Max Word:</label>
                                <input type="number" name="max_word" class="form-control" value="{{ jobdet.max_word }}" placeholder="Enter Words" id="week_max_words" >
                               </div>
            
                              <div class='form-group' hidden>
                                <label>Monthly Max Word:</label>
                                <input type="number" name="monthly_max_word" class="form-control" value="{{ jobdet.monthly_max_word }}" placeholder="Enter Words" id="monthly_max_word" readonly>
                               </div>
            
            
                             
            
                               <div class='form-group' hidden>
                                <label>Monthly Min Word:</label>
                                <input type="number" name="monthly_min_word" class="form-control" value="{{ jobdet.monthly_min_word }}" placeholder="Enter Words" id="monthly_min_word" readonly>
                               </div>
                           


                               <div class='form-group'>
                                <label>Month:</label>
                                <input type="number" name="month" class="form-control" value="{{ jobdet.month }}" placeholder="Enter Month">

                              </div>
            
                              <div  class='form-group'>
                                <label>Day:</label>
            
                                <input type="number" name="date" class="form-control" value="{{ jobdet.date }}" placeholder="Enter Days">

            
                            </div>
                             
                      
                                  <div class="col-xs-12 col-sm-12 col-md-12 text-center">
                                      <button type="submit" class="btn btn-sm btn-primary">Submit</button>
                                </div>
                          </div>
                      </form>
                      </div>
                    
                </div>
               
              </div>
            </div>
          </div>


          {% comment %} Show Modal {% endcomment %}

      
        {% endfor %}
        </tbody>
       </table>
      </div>
       <div class="modal fade" id="exampleModal3" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel3" aria-hidden="true">
        <div class="modal-dialog modal-dialog-slideout modal-lg" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h4 class="modal-title" id="exampleModalLabel">
              <div class="row">
                <div class="col-md-4"><label>FAQ</label></div>
                <div class="col-md-4"><label>ADD NEW DATA</label></div>
                <div class="col-md-4"><button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true" style="font-size:18px">×</span>
                </button></div>

              </div></h4></div>

              
              
            
            
            {% comment %} <div class="card"> {% endcomment %}
            <div class="card-body">
              <form method="POST" onsubmit="return submitForm(this);">
                {% csrf_token %}
                  
                <div class="row">
                  <div class="col-md-4" class="border" style="border-right: 2px solid lightblue;">
                    
                    
                 
                    <p><i class="fa fa-angle-double-right" style="font-weight:bold;"></i> <span style="font-family:sans-serif; font-weight:bold; font-size:10px;">Level:  </span><span style="font-size:10px;">Enter Details Based On The Entire Details</span> <span style="color:darkolivegreen;font-weight:bold"></span></p>
                    <p><i class="fa fa-angle-double-right" style="font-weight:bold;"></i> <span style="font-family:sans-serif; font-weight:bold; font-size:10px;">PPW:  </span><span style="font-size:10px;">Enter Correct PPW, if ppw is in fraction, please follow (0.11)</span> <span style="color:darkolivegreen;font-weight:bold"></span></p>
                    <p><i class="fa fa-angle-double-right" style="font-weight:bold;"></i> <span style="font-family:sans-serif; font-weight:bold; font-size:10px;">Type:  </span><span style="font-size:10px;">Enter Customer Type, based on number of words</span> <span style="color:darkolivegreen;font-weight:bold"></span></p>
                    <p><i class="fa fa-angle-double-right" style="font-weight:bold;"></i> <span style="font-family:sans-serif; font-weight:bold; font-size:10px;">Weekly Minimum Words:  </span><span style="font-size:10px;">Enter Amount of expected minimum words in a week</span> <span style="color:darkolivegreen;font-weight:bold"></span></p>
                    <p><i class="fa fa-angle-double-right" style="font-weight:bold;"></i> <span style="font-family:sans-serif; font-weight:bold; font-size:10px;">Weekly Maximum Words:  </span><span style="font-size:10px;">Enter Amount of expected maximum words in a week</span> <span style="color:darkolivegreen;font-weight:bold"></span></p>
                    <p><i class="fa fa-angle-double-right" style="font-weight:bold;"></i> <span style="font-family:sans-serif; font-weight:bold; font-size:10px;">Year:  </span><span style="font-size:10px;">Enter Total Year</span> <span style="color:darkolivegreen;font-weight:bold"></span></p>
                    <p><i class="fa fa-angle-double-right" style="font-weight:bold;"></i> <span style="font-family:sans-serif; font-weight:bold; font-size:10px;">Month:  </span><span style="font-size:10px;">Enter Total Month</span> <span style="color:darkolivegreen;font-weight:bold"></span></p>
                    <p><i class="fa fa-angle-double-right" style="font-weight:bold;"></i> <span style="font-family:sans-serif; font-weight:bold; font-size:10px;">Days:  </span><span style="font-size:10px;">Enter Total Days</span> <span style="color:darkolivegreen;font-weight:bold"></span></p>
  
  
                  </div>
                <div class="col-md-4">
                  <div  class='form-group'>

                    <label class="floating-label">Level</label><br>
                    <input type="text" class="form-control inputText" id="level" name="level">

                   </div>
              


                   <div  class='form-group'>

                    <label class="floating-label">Type</label><br>
                    <input type="text" name="type" id="type" class="form-control inputText">

                   </div>

                   
                  

                 

                   <div  class='form-group'>
                    <label class="floating-label">Weekly Min Word:</label><br>
                    <input type="number" name="min_word" class="form-control inputText" id="min_words">
                   </div>

                   <div  class='form-group'>
                    <label class="floating-label">Year</label><br>
                    <input type="number" class="form-control inputText" name="year">

                   </div>
                 


                </div>
                
                <div class="col-md-4">
                  <div  class='form-group'>
                 
                    <label class="floating-label">PPW</label><br>
                    <input type="text" name="ppw" class="form-control inputText"  step="any"  id="ppw">

                  </div> 

                  <div  class='form-group'>
                    <label class="floating-label">Weekly Max Word:</label><br>
                    <input type="number" name="max_word" class="form-control inputText" id="max_words">
                   </div>
      
               
               
                   <div  class='form-group'>
                    <label class="floating-label">Month:</label><br>
                    <input type="number" name="month"  class="form-control inputText" >

                  </div>

                  <div  class='form-group'>
                    <label class="floating-label">Day:</label>

                    <input type="number" name="date"  class="form-control inputText">


                </div>

                  {% comment %} <div  class='form-group'>
                    <label>Monthly Max Word:</label>
                    <input type="number" name="monthly_max_word" class="form-control" placeholder="Enter Words" id="max_words1" readonly>
                   </div> {% endcomment %}


                 

                   {% comment %} <div  class='form-group'>
                    <label>Monthly Min Word:</label>
                    <input type="number" name="monthly_min_word" class="form-control" placeholder="Enter Words" id="min_words1" readonly>
                   </div>
                {% endcomment %}

                </div>
                 
          
                      <div class="col-xs-12 col-sm-12 col-md-12 text-center">
                          <button type="submit" class="btn btn-sm btn-primary" id="btn-submit">Submit</button>
                    </div>
              </div>
              </form>
              </div>
            
        </div>
        
      </div>
    </div>
  </div>



  

</div>
</div>


<script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.0/sweetalert.min.js"></script>
<script type="text/javascript">
 
     $('.show_confirm').click(function(event) {
          var form =  $(this).closest("form");
          var name = $(this).data("name");
          event.preventDefault();
          swal({
              title: `Are you sure you want to delete this record?`,
              text: "If you delete this, it will be gone forever.",
              icon: "warning",
              buttons: true,
              dangerMode: true,
          })
          .then((willDelete) => {
            if (willDelete) {
              form.submit();
            }
          });
      });
  
</script>
<script type="text/javascript">window.mytest = function() { var isValid = confirm('Are you sure ?');if (!isValid) { event.preventDefault();  alert("It wont delete. Yay!");}}</script>




    <script>


      function submitForm(form) {
        var words_min = document.getElementById("min_words").value;
        var words_max = document.getElementById("max_words").value;
        var level = document.getElementById("level").value;
        var type = document.getElementById("type").value;
        var ppw = document.getElementById("ppw").value;
        var min_income = (words_min * ppw);
        var max_income = (words_max * ppw);
        var month_words_min = (words_min * 4);
        var month_words_max = (words_max * 4);
        var min_income_month = (month_words_min * ppw);
        var max_income_month = (month_words_max * ppw);

        
          swal({
              title: "Are you sure Want To Submit?",
              text:  "Employee Level:"+ ' '+ level+'\n'
                    +"Level Type:"+ ' '+ type+'\n'
                    +"Weekly Minimum Words:"+ ' ' + words_min+' '+'\n'
                    +"Weekly Maximum Words:"+ ' ' + words_max+' '+'\n'
                    +"Monthly Minimum Words:"+ ' ' + month_words_min+' '+'\n'
                    +"Monthly Maximum Words:"+ ' ' + month_words_max+' '+'\n'
                    +"PPW:"+ ' ' + ppw+'\n'
                    +"Weekly Minimum Income:"+ ' ' + min_income+'\n'
                    +"Weekly Maximum Income:"+ ' ' + max_income+'\n'
                    +"Monthly Maximum Income:"+ ' ' + min_income_month+'\n'
                    +"Monthly Maximum Income:"+ ' ' + max_income_month,

              icon: "warning",
              dangerMode: true,
              
              buttons: ["Cancel", "Submit"], 

          })
          .then(function (isOkay) {
              if (isOkay) {
                  form.submit();
              }
          });
          return false;
      }
  </script>

  
  <script>


    function submitForm1(form) {
      
        swal({
            title: "Are you sure Want To Submit?",
            text:  "Please Verify Your Data, Before Final Submission",

            icon: "warning",
            dangerMode: true,
            
            buttons: ["Cancel", "Submit"], 

        })
        .then(function (isOkay) {
            if (isOkay) {
                form.submit();
            }
        });
        return false;
    }
</script>

  <script type="text/javascript">
    $(function () {
        $("#example1").DataTable({
         "searching": true,
         "paging":false,  
         "ordering":false,  
         "scrollX":true,
         "scrollY":"400px",
         "scrollCollapse": false,
         "fixedColumns":   {
          "left": 3,
          "right": 2,
      },
   
         "responsive": false,
        "stateSave": true,
       }).buttons().container().appendTo('#example1_wrapper .col-md-6:eq(0)')
     });
   </script> 
   <script>
    document.querySelector("input[type=number]")
    .oninput = e => console.log(new Date(e.target.valueAsNumber, 0, 1))
 </script>
 

 <script>
  $("select").select2({
    tags: "true",
    // allowClear: true
    dropdownParent:$('#exampleModal3'),
  });
  </script>
  
{% comment %} Month date Ajax {% endcomment %}


  <script>
    function dataval(id)
    {

      $("select").select2({
        tags: "true",
        // allowClear: true
        dropdownParent:$('#editmodal'+id),
      });


      
    }

  </script>
  

  
</section>
  {% endblock %}            
  
  




